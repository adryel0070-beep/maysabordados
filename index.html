<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Loja de Bordados</title>
<style>
  body { font-family: Arial, sans-serif; background: #fafafa; margin: 0; padding: 20px; }
  .produto { background: white; border-radius: 10px; padding: 15px; margin-bottom: 20px; box-shadow: 0 0 10px rgba(0,0,0,0.1); }
  img { width: 100%; max-width: 300px; border-radius: 10px; }
  button { background: #4caf50; color: white; border: none; padding: 10px 15px; border-radius: 5px; cursor: pointer; }
</style>
</head>
<body>
  <h1>Produtos Disponíveis</h1>
  <div id="lista-produtos"></div>

  <script>
    const API_URL = "https://script.google.com/macros/s/AKfycbyHf77qNPzVAFu_iTjxxwCkl0Yy_jJPb7S0bg4jIJ_s8HAV5brsgHj44k6GDqNd_z5V0g/exec";

    async function carregarProdutos() {
      const res = await fetch(API_URL);
      const produtos = await res.json();

      const container = document.getElementById("lista-produtos");
      container.innerHTML = "";

      produtos.forEach(p => {
        const div = document.createElement("div");
        div.className = "produto";
        div.innerHTML = `
          <img src="${p.Foto}" alt="${p.Título}">
          <h3>${p.Título}</h3>
          <p>${p.Descrição}</p>
          <p><b>Preço:</b> R$ ${p["Valor Unitario"]}</p>
          <p><b>Estoque:</b> ${p.Quantidade} unidades</p>
          <button onclick="comprar('${p.Título}', ${p["Valor Unitario"]}, ${p["Valor do Frete"]})">Comprar</button>
        `;
        container.appendChild(div);
      });
    }

    async function comprar(produto, valor, frete) {
      const nome = prompt("Seu nome completo:");
      const whatsapp = prompt("Seu WhatsApp:");
      const endereco = prompt("Endereço para entrega (ou deixe em branco para retirada):");
      const quantidade = prompt("Quantidade desejada:");

      const total = (valor * quantidade) + (endereco ? frete : 0);

      const venda = {
        Nome: nome,
        WhatsApp: whatsapp,
        Endereço: endereco || "Retirada",
        Produto: produto,
        Quantidade: quantidade,
        ValorTotal: total
      };

      await fetch(API_URL, {
        method: "POST",
        body: JSON.stringify(venda)
      });

      alert(`Pedido registrado com sucesso! Valor total: R$ ${total.toFixed(2)}. A empreendedora entrará em contato via WhatsApp.`);
    }

    carregarProdutos();
  </script>
</body>
</html>

